<!doctype html>
<html>

<head>
  <title>Socket.IO chat</title>
  <style>
    body {
      background: #f1f1f1;
    }

    #player {
      background: red;
      width: 20px;
      height: 20px;
      top: 200px;
      left: 300px;
      position: absolute;
    }
  </style>
</head>

<body>
  <div id="player"></div>
  <script src="/socket.io/socket.io.js"></script>
  <script src="https://code.jquery.com/jquery-1.11.1.js"></script>
  <script>
    $(function () {
      var socket = io();
      var $player = $('#player');
      var playerDimensions = {
        x: 20,
        y: 20
      };

      function getCurrentPosition() {
        return {
          x: parseInt($player.css('left')),
          y: parseInt($player.css('top'))
        };
      }

      $('body').keyup(function (e) {
        if (e.keyCode === 38) {
          socket.emit('move', {
            x: getCurrentPosition().x,
            y: getCurrentPosition().y - playerDimensions.y
          }, function (data) {
            $player.css('left', data.x + 'px');
            $player.css('top', data.y + 'px');
          });
        }

        if (e.keyCode === 40) {
          socket.emit('move', {
            x: getCurrentPosition().x,
            y: getCurrentPosition().y + playerDimensions.y
          }, function (data) {
            $player.css('left', data.x + 'px');
            $player.css('top', data.y + 'px');
          });
        }

        if (e.keyCode === 37) {
          socket.emit('move', {
            x: getCurrentPosition().x - playerDimensions.x,
            y: getCurrentPosition().y
          }, function (data) {
            $player.css('left', data.x + 'px');
            $player.css('top', data.y + 'px');
          });
        }

        if (e.keyCode === 39) {
          socket.emit('move', {
            x: getCurrentPosition().x + playerDimensions.x,
            y: getCurrentPosition().y
          }, function (data) {
            $player.css('left', data.x + 'px');
            $player.css('top', data.y + 'px');
          });
        }
      });
    });
  </script>
</body>

</html>